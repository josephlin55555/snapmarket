
<ion-view view-title="Search" hide-nav-bar="true">
  <ion-content>

    <div class="bar bar-header bar-positive item-input-inset">
      <tag-search class="search-wrapper-light" placeholder="Search" min-length="0" model="tags" watch="true" enter-callback="filterOne">
      </tag-search>
      <button id="addButton" class="button button-clear" ng-click="addTag(search.value, filterOne)">
        Add
      </button>
    </div>
    
    <ion-list>
      <ion-item class="tagCloud" ng-show="tagCloud.length">
        <button class="button button-small button-stable" ng-repeat="tag in tagCloud" ng-click="removeTag(tag, filterAll)">
        {{tag}}
        </button>
      </ion-item>

      <ion-item collection-repeat="tag in tagResults" class="item" ng-click="addTag(tag[0], filterOne)">
        {{tag[0]}} : {{tag[1]}} listings
      </ion-item>
    </ion-list>

    <ion-scroll direction="y"> 
      <!-- <div masonry>  -->
        <!-- give ability to click on card below -->
        <div ng-repeat="result in results" ng-click="selectCard(result)">
          <div class="card buySearch">
            <a class="clear-bg item-bg-image has-mask-reverse">
              <h2 class="listingTitle">{{result.title}}</h2>
              <p class="listingUser">
                {{result.displayName}} 
                <span class="moment">Posted {{result.moment}}</span>
              </p>
              <img class="listingImage" ng-src="{{result.img}}">        
              <div ng-repeat="item in result.items">
                <img src="images/tag.png" ng-style="position(item)"{{item}}> 
                <i class="icon ion-social-usd" ng-style="positionText(item)"{{item}}> {{item.price}}</i>
              </div>
            </a>
          </div>
        </div>  
      <!-- </div> -->
    </ion-scroll> 
  </ion-content>
</ion-view>
